<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>高中英文單字練習</title>
    <!-- 載入 Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 載入 Inter 字體 -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* 自訂樣式 */
        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
            background-color: #f8f9fa; /* 淺灰色背景 */
        }

        /* 側邊欄樣式 */
        #sidebar {
            transition: transform 0.3s ease-in-out;
            /* 預設在小螢幕上隱藏 */
            transform: translateX(-100%);
        }
        
        #sidebar.open {
            transform: translateX(0);
        }

        /* 在 md (768px) 以上的螢幕，側邊欄預設開啟 */
        @media (min-width: 768px) {
            #sidebar {
                transform: translateX(0);
            }
            #sidebar-toggle-btn {
                /* 在大螢幕上隱藏漢堡按鈕 */
                display: none; 
            }
            #overlay {
                /* 在大螢幕上不需要遮罩 */
                display: none !important;
            }
        }


        /* 翻卡效果 */
        .flashcard-container {
            perspective: 1000px; /* 3D 效果的透視 */
            cursor: pointer;
        }

        .flashcard-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        
        .card-front,
        .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden; /* Safari */
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.5rem; /* 圓角 */
            background-color: white;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }

        .card-back {
            /* 卡片背面預設是翻轉的 */
            transform: rotateY(180deg);
            flex-direction: column;
            padding: 1rem;
            text-align: center;
            /* 讓內容可以滾動，以防內容過多 */
            overflow-y: auto; 
        }
        
        /* 側邊欄作用中狀態 */
        .sidebar-link.active {
            color: white;
            font-weight: 700;
            box-shadow: 0 4px 12px -1px var(--gradient-shadow, rgba(0,0,0,0.2));
        }

        /* 漸層顏色 */
        .gradient-1 { 
            --gradient-shadow: rgba(168, 85, 247, 0.4);
            background-image: linear-gradient(to right, #a855f7, #ec4899); 
        }
        .gradient-2 { 
            --gradient-shadow: rgba(59, 130, 246, 0.4);
            background-image: linear-gradient(to right, #3b82f6, #06b6d4); 
        }
        .gradient-3 { 
            --gradient-shadow: rgba(34, 197, 94, 0.4);
            background-image: linear-gradient(to right, #22c55e, #14b8a6); 
        }
        .gradient-4 { 
            --gradient-shadow: rgba(245, 158, 11, 0.4);
            background-image: linear-gradient(to right, #f59e0b, #f97316); 
        }
        .gradient-5 { 
            --gradient-shadow: rgba(239, 68, 68, 0.4);
            background-image: linear-gradient(to right, #ef4444, #f43f5e); 
        }
        .gradient-6 {
            --gradient-shadow: rgba(139, 92, 246, 0.4);
            background-image: linear-gradient(to right, #8b5cf6, #d946ef);
        }
        .gradient-7 {
            --gradient-shadow: rgba(20, 184, 166, 0.4);
            background-image: linear-gradient(to right, #14b8a6, #10b981);
        }
        .gradient-8 {
            --gradient-shadow: rgba(217, 119, 6, 0.4);
            background-image: linear-gradient(to right, #d97706, #ea580c);
        }
        .gradient-9 {
            --gradient-shadow: rgba(99, 102, 241, 0.4);
            background-image: linear-gradient(to right, #6366f1, #818cf8);
        }
        .gradient-10 {
            --gradient-shadow: rgba(236, 72, 153, 0.4);
            background-image: linear-gradient(to right, #ec4899, #f472b6);
        }


        .sidebar-link {
            transition: all 0.2s ease-in-out;
        }
        .sidebar-link:not(.active):hover {
            background-color: #f1f5f9; /* 淺灰 */
        }
        
        /* --- 新增：練習模式樣式 --- */
        
        /* 彈出視窗 (Modal) */
        .modal-backdrop {
            background-color: rgba(0, 0, 0, 0.5);
            transition: opacity 0.3s ease;
        }
        .modal {
            transition: transform 0.3s ease, opacity 0.3s ease;
            max-height: 80vh; /* 限制最大高度 */
        }
        
        /* 練習介面選項按鈕 */
        .quiz-option-btn {
            transition: all 0.2s ease-in-out;
        }
        .quiz-option-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .quiz-option-btn:disabled {
            opacity: 0.8;
            cursor: not-allowed;
        }
        /* 答對的樣式 */
        .quiz-option-btn.correct {
            background-color: #22c55e; /* 綠色 */
            color: white;
            border-color: #16a34a;
        }
        /* 答錯的樣式 */
        .quiz-option-btn.incorrect {
            background-color: #ef4444; /* 紅色 */
            color: white;
            border-color: #dc2626;
        }
        
        /* 連勝特效 */
        @keyframes streak-pop {
            0% { transform: scale(0.5) translateY(0); opacity: 1; }
            50% { transform: scale(1.2) translateY(-30px); opacity: 1; }
            100% { transform: scale(1.5) translateY(-60px); opacity: 0; }
        }
        #streak-effect {
            font-size: 2.5rem; /* 放大字體 */
            font-weight: 700;
            color: #f59e0b; /* 橘黃色 */
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            /* 確保它在最上層 */
            z-index: 100;
            /* 預設隱藏且無互動 */
            pointer-events: none;
        }
        #streak-effect.animate {
            animation: streak-pop 1s ease-out forwards;
        }
    </style>
</head>
<body class="flex h-screen overflow-hidden">
    
    <!-- 半透明遮罩 (用於行動裝置 & 彈出視窗) -->
    <div id="overlay" class="fixed inset-0 bg-black bg-opacity-50 z-20 hidden"></div>

    <!-- 側邊欄 -->
    <aside id="sidebar" class="w-64 bg-white shadow-md flex-shrink-0 fixed inset-y-0 left-0 z-30 md:relative">
        <div class="p-4 flex justify-between items-center border-b md:border-b-0">
            <h2 class="text-sm font-semibold text-gray-500 uppercase tracking-wider">單字列表</h2>
            <!-- 行動裝置上的關閉按鈕 -->
            <button id="sidebar-close-btn" class="md:hidden text-gray-500 hover:text-gray-800">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
        </div>
        <nav id="sidebar-nav" class="flex flex-col p-2 overflow-y-auto divide-y divide-gray-200"></nav>
    </aside>

    <!-- 主要內容區 -->
    <main id="main-content" class="flex-1 flex flex-col overflow-hidden">
        <!-- 頂部標題 -->
        <header class="bg-white shadow-sm p-4 z-10 flex items-center">
            <!-- 漢堡按鈕 -->
            <button id="sidebar-toggle-btn" class="p-2 mr-2 text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-gray-300">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
            </button>
            <h1 id="main-title" class="text-xl font-bold text-gray-800 hidden sm:block">高中英文單字練習</h1>

            <!-- 搜尋欄區塊 -->
            <div class="flex-1 ml-4 flex justify-center">
                <div class="relative w-full max-w-md">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                    </div>
                    <input type="search" id="search-bar" placeholder="全局搜尋單字 (中/英)..." class="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-full leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                </div>
            </div>

            <!-- 新增：開始練習按鈕 -->
            <button id="start-quiz-modal-btn" class="ml-4 px-3 sm:px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 flex-shrink-0">
                <span class="hidden sm:inline">開始練習</span>
                <!-- 行動裝置上只顯示圖示 -->
                <svg class="w-5 h-5 sm:hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v11.494m-5.747-5.747H17.747"></path></svg> <!-- 簡化圖示，例如用 "play" 或 "check" -->
                <svg class="w-5 h-5 sm:hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z" clip-rule="evenodd" />
                </svg>
            </button>
        </header>

        <!-- 主要內容容器 (練習模式會替換這裡的內容) -->
        <div class="flex-1 overflow-y-auto p-6 lg:p-10" id="main-content-area">
            <!-- 單字卡網格 -->
            <div id="vocab-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6">
                <!-- 單字卡會由 JavaScript 動態插入這裡 -->
            </div>
        </div>

        <!-- 底部提示 -->
        <footer class="text-center p-4 text-gray-500 text-sm bg-white border-t" id="main-footer">
            點擊卡片或按空白鍵/Enter 進行翻轉
        </footer>
    </main>

    <!-- 新增：練習設定 Modal -->
    <div id="quiz-setup-modal" class="fixed inset-0 z-40 flex items-center justify-center p-4 hidden">
        <!-- 彈出視窗背景 -->
        <div class="modal-backdrop fixed inset-0"></div>
        
        <!-- 彈出視窗內容 -->
        <div class="modal w-full max-w-lg bg-white rounded-lg shadow-2xl z-50 transform scale-95 opacity-0">
            <!-- 標題 -->
            <div class="flex justify-between items-center p-4 border-b">
                <h3 class="text-lg font-semibold text-gray-800">練習設定</h3>
                <button id="close-quiz-modal-btn" class="p-1 rounded-full text-gray-400 hover:bg-gray-200 hover:text-gray-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            
            <!-- 內容 -->
            <div class="p-6">
                <!-- 1. 選擇天數 -->
                <div>
                    <h4 class="font-medium text-gray-700">選擇要練習的天數</h4>
                    <div id="day-selection-grid" class="grid grid-cols-3 sm:grid-cols-4 gap-2 mt-3 max-h-48 overflow-y-auto p-2 bg-gray-50 rounded-md border">
                        <!-- JS 動態填入 Checkbox -->
                    </div>
                    <div class="mt-2 text-xs text-gray-500">
                        <button id="toggle-all-days-btn" class="text-blue-500 hover:underline">全選 / 全不選</button>
                    </div>
                </div>
                
                <!-- 2. 選擇模式 -->
                <div class="mt-6">
                    <h4 class="font-medium text-gray-700">選擇練習模式</h4>
                    <div class="mt-3 space-y-2">
                        <label class="flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer">
                            <!-- 修改：radio -> checkbox，並預設選中 -->
                            <input type="checkbox" name="quiz-type" value="en-to-zh" class="form-checkbox text-blue-600" checked>
                            <span class="ml-3 text-gray-700">看英文，選中文</span>
                        </label>
                        <label class="flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer">
                            <!-- 修改：radio -> checkbox -->
                            <input type="checkbox" name="quiz-type" value="zh-to-en" class="form-checkbox text-blue-600">
                            <span class="ml-3 text-gray-700">看中文，選英文</span>
                        </label>
                    </div>
                </div>
            </div>
            
            <!-- 底部按鈕 -->
            <div class="flex justify-end items-center p-4 bg-gray-50 border-t rounded-b-lg">
                <span id="quiz-setup-error" class="text-sm text-red-500 mr-4 hidden">請至少選擇一個天數</span>
                <button id="start-quiz-btn" class="px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50">
                    開始測驗
                </button>
            </div>
        </div>
    </div>
    
    <!-- 新增：連勝特效 (Streak Effect) -->
    <div id="streak-effect" class="hidden fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2">
        <!-- JS 會填入內容, e.g., "✨ 5 連勝!" -->
    </div>


    <script>
        // --- 範例單字資料 ---
        const vocabData = {
            'Day 1': [
                { word: 'abandon', pos: 'v.', definition: '放棄；遺棄', level: 'B2', example: '' },
                { word: 'absolute', pos: 'adj.', definition: '絕對的', level: 'B2', example: '' },
                { word: 'absorb', pos: 'v.', definition: '吸收；使專注', level: 'B2', example: '' },
                { word: 'abstract', pos: 'adj.', definition: '抽象的；理論的', level: 'B2', example: '', mnemonic: '<b>ab (away) + tract (pull)</b><br>從事實中被「拉開」的 →「抽象的」' },
                { word: 'abuse', pos: 'v./n.', definition: '濫用；虐待', level: 'C1', example: '' },
                { word: 'academic', pos: 'adj.', definition: '學術的', level: 'B2', example: '' },
                { word: 'access', pos: 'n./v.', definition: '使用權；進入', level: 'B2', example: '' },
                { word: 'accommodate', pos: 'v.', definition: '容納；使適應', level: 'C1', example: '', mnemonic: '<b>ac (to) + com (with) + mod (fit)</b><br>使「符合」在一起 →「容納」' },
                { word: 'accompany', pos: 'v.', definition: '陪伴；伴隨', level: 'B2', example: '' },
                { word: 'accomplish', pos: 'v.', definition: '完成；實現', level: 'B2', example: '' },
                { word: 'accumulate', pos: 'v.', definition: '累積；聚集', level: 'B2', example: '', mnemonic: '<b>ac (to) + cumul (heap)</b><br>「堆」積起來 →「累積」' },
                { word: 'accurate', pos: 'adj.', definition: '精確的；正確的', level: 'B2', example: '' },
                { word: 'acknowledge', pos: 'v.', definition: '承認；致謝', level: 'B2', example: '' },
                { word: 'acquire', pos: 'v.', definition: '習得；獲得', level: 'B2', example: '' },
                { word: 'activate', pos: 'v.', definition: '啟動；使活化', level: 'B2', example: '' },
                { word: 'adapt', pos: 'v.', definition: '適應；改編', level: 'B2', example: '' },
                { word: 'addict', pos: 'n.', definition: '成癮者', level: 'B2', example: '' },
                { word: 'adequate', pos: 'adj.', definition: '足夠的；合格的', level: 'B2', example: '' },
                { word: 'adjacent', pos: 'adj.', definition: '鄰近的；相連的', level: 'C1', example: '', mnemonic: '<b>ad (to) + jac (lie)</b><br>「躺」在旁邊的 →「鄰近的」' },
                { word: 'adjust', pos: 'v.', definition: '調整；適應', level: 'B2', example: '' }
            ],
            'Day 2': [
                { word: 'advance', pos: 'v./n.', definition: '前進；進步', level: 'B2', example: '' },
                { word: 'advocate', pos: 'v./n.', definition: '提倡；擁護者', level: 'C1', example: '' },
                { word: 'agency', pos: 'n.', definition: '代理機構；局處', level: 'B2', example: '' },
                { word: 'agenda', pos: 'n.', definition: '議程；待辦事項', level: 'B2', example: '' },
                { word: 'aggressive', pos: 'adj.', definition: '具攻擊性；積極進取', level: 'B2', example: '' },
                { word: 'alert', pos: 'adj./v.', definition: '警覺的；警告', level: 'B2', example: '' },
                { word: 'allocate', pos: 'v.', definition: '分配；撥出', level: 'B2', example: '' },
                { word: 'alter', pos: 'v.', definition: '改變；修改', level: 'B2', example: '' },
                { word: 'ambiguous', pos: 'adj.', definition: '含糊的；模稜兩可的', level: 'C1', example: '' },
                { word: 'ambitious', pos: 'adj.', definition: '有野心的', level: 'B2', example: '' },
                { word: 'ambition', pos: 'n.', definition: '野心、抱負', level: 'B2', example: '' },
                { word: 'amend', pos: 'v.', definition: '修正；改進', level: 'C1', example: '' },
                { word: 'analyze', pos: 'v.', definition: '分析', level: 'B2', example: '' },
                { word: 'ancestor', pos: 'n.', definition: '祖先', level: 'B1', example: '' },
                { word: 'annual', pos: 'adj.', definition: '每年的；年度的', level: 'B2', example: '' },
                { word: 'anxiety', pos: 'n.', definition: '焦慮；憂慮', level: 'B2', example: '' },
                { word: 'apparent', pos: 'adj.', definition: '明顯的；表面的', level: 'B2', example: '' },
                { word: 'appeal', pos: 'n./v.', definition: '呼籲；吸引力', level: 'B2', example: '' },
                { word: 'appoint', pos: 'v.', definition: '任命；指定', level: 'B2', example: '' },
                { word: 'appreciate', pos: 'v.', definition: '感激；賞識', level: 'B2', example: '' }
            ],
            'Day 3': [
                { word: 'appropriate', pos: 'adj.', definition: '適當的；恰當的', level: 'B2', example: '' },
                { word: 'approval', pos: 'n.', definition: '批准；贊同', level: 'B2', example: '' },
                { word: 'approximate', pos: 'adj.', definition: '大約的；近似的', level: 'B2', example: '' },
                { word: 'arbitrary', pos: 'adj.', definition: '隨意的；武斷的', level: 'C1', example: '' },
                { word: 'arise', pos: 'v.', definition: '出現；產生', level: 'B2', example: '' },
                { word: 'aspect', pos: 'n.', definition: '方面；層面', level: 'B2', example: '' },
                { word: 'assemble', pos: 'v.', definition: '組裝；集合', level: 'B2', example: '' },
                { word: 'assert', pos: 'v.', definition: '斷言；主張', level: 'C1', example: '' },
                { word: 'assess', pos: 'v.', definition: '評估；估算', level: 'B2', example: '' },
                { word: 'assign', pos: 'v.', definition: '分配；指派', level: 'B2', example: '' },
                { word: 'assist', pos: 'v.', definition: '協助；幫助', level: 'B2', example: '' },
                { word: 'assume', pos: 'v.', definition: '假設；承擔', level: 'B2', example: '' },
                { word: 'assumption', pos: 'n.', definition: '假設；前提', level: 'B2', example: '' },
                { word: 'assure', pos: 'v.', definition: '保證；確信', level: 'B2', example: '' },
                { word: 'attach', pos: 'v.', definition: '附上；連接', level: 'B2', example: '' },
                { word: 'attain', pos: 'v.', definition: '達到；實現', level: 'B2', example: '' },
                { word: 'attempt', pos: 'v./n.', definition: '嘗試；企圖', level: 'B1', example: '' },
                { word: 'attribute', pos: 'v./n.', definition: '歸因於；特質', level: 'B2', example: '' },
                { word: 'aware', pos: 'adj.', definition: '意識到的', level: 'B2', example: '' },
                { word: 'behalf', pos: 'n.', definition: '代表；利益', level: 'C1', example: '' }
            ],
            'Day 4': [
                { word: 'behave', pos: 'v.', definition: '表現；舉止', level: 'A2', example: '' },
                { word: 'beneficial', pos: 'adj.', definition: '有益的', level: 'B2', example: '' },
                { word: 'bias', pos: 'n.', definition: '偏見；偏好', level: 'C1', example: '' },
                { word: 'boundary', pos: 'n.', definition: '邊界；界限', level: 'B2', example: '' },
                { word: 'capability', pos: 'n.', definition: '能力；潛力', level: 'C1', example: '' },
                { word: 'capable', pos: 'adj.', definition: '有能力的', level: 'B2', example: '' },
                { word: 'capacity', pos: 'n.', definition: '容量；能力', level: 'B2', example: '' },
                { word: 'capture', pos: 'v.', definition: '捕捉；奪取', level: 'B1', example: '' },
                { word: 'category', pos: 'n.', definition: '類別；範疇', level: 'B2', example: '' },
                { word: 'cease', pos: 'v.', definition: '停止；終止', level: 'C1', example: '' },
                { word: 'challenge', pos: 'n./v.', definition: '挑戰；質疑', level: 'B2', example: '' },
                { word: 'circumstance', pos: 'n.', definition: '情況；環境', level: 'B2', example: '' },
                { word: 'cite', pos: 'v.', definition: '引用；舉例', level: 'C1', example: '' },
                { word: 'clarify', pos: 'v.', definition: '澄清；說明', level: 'B2', example: '' },
                { word: 'coherent', pos: 'adj.', definition: '連貫的；一致的', level: 'C1', example: '' },
                { word: 'coincide', pos: 'v.', definition: '同時發生；一致', level: 'C1', example: '' },
                { word: 'collapse', pos: 'v./n.', definition: '倒塌；崩潰', level: 'B2', example: '' },
                { word: 'colleague', pos: 'n.', definition: '同事', level: 'B2', example: '' },
                { word: 'combine', pos: 'v.', definition: '結合；混合', level: 'B2', example: '' },
                { word: 'commence', pos: 'v.', definition: '開始；著手', level: 'C1', example: '' }
            ],
            'Day 5': [
                { word: 'commit', pos: 'v.', definition: '犯（罪）、承諾', level: 'B2', example: '' },
                { word: 'commodity', pos: 'n.', definition: '商品；日用品', level: 'B2', example: '' },
                { word: 'communicate', pos: 'v.', definition: '溝通；交流', level: 'B2', example: '' },
                { word: 'community', pos: 'n.', definition: '社群；社區', level: 'B1', example: '' },
                { word: 'compare', pos: 'v.', definition: '比較', level: 'A2', example: '' },
                { word: 'compensate', pos: 'v.', definition: '補償；賠償', level: 'C1', example: '' },
                { word: 'compete', pos: 'v.', definition: '競爭', level: 'B1', example: '' },
                { word: 'compatible', pos: 'adj.', definition: '相容的', level: 'C1', example: '' },
                { word: 'compile', pos: 'v.', definition: '編輯；彙整', level: 'C1', example: '' },
                { word: 'complement', pos: 'v./n.', definition: '補充；相配物', level: 'B2', example: '' },
                { word: 'complex', pos: 'adj.', definition: '複雜的', level: 'B2', example: '' },
                { word: 'component', pos: 'n.', definition: '組成部分', level: 'B2', example: '' },
                { word: 'comprehend', pos: 'v.', definition: '理解；領會', level: 'B2', example: '' },
                { word: 'comprehensive', pos: 'adj.', definition: '全面的；廣泛的', level: 'C1', example: '' },
                { word: 'comprise', pos: 'v.', definition: '包含；由…組成', level: 'C1', example: '' },
                { word: 'conceal', pos: 'v.', definition: '隱藏；遮掩', level: 'B2', example: '' },
                { word: 'conceive', pos: 'v.', definition: '構思；想像', level: 'C1', example: '' },
                { word: 'concentrate', pos: 'v.', definition: '專注；集中', level: 'B2', example: '' },
                { word: 'conclude', pos: 'v.', definition: '下結論；結束', level: 'B2', example: '' },
                { word: 'concrete', pos: 'adj.', definition: '具體的；實際的', level: 'B2', example: '' }
            ],
            'Day 6': [
                { word: 'concurrent', pos: 'adj.', definition: '同時發生的', level: 'C1', example: '' },
                { word: 'conduct', pos: 'v./n.', definition: '執行；行為', level: 'B2', example: '' },
                { word: 'confer', pos: 'v.', definition: '商議；授予', level: 'C1', example: '' },
                { word: 'confident', pos: 'adj.', definition: '有自信的', level: 'B2', example: '' },
                { word: 'confirm', pos: 'v.', definition: '證實；確認', level: 'B2', example: '' },
                { word: 'conflict', pos: 'n./v.', definition: '衝突；矛盾', level: 'B2', example: '' },
                { word: 'conform', pos: 'v.', definition: '遵守；符合', level: 'C1', example: '' },
                { word: 'conscious', pos: 'adj.', definition: '有意識的', level: 'B2', example: '' },
                { word: 'consent', pos: 'v./n.', definition: '同意；允許', level: 'B2', example: '' },
                { word: 'consequence', pos: 'n.', definition: '結果；後果', level: 'B2', example: '' },
                { word: 'consequent', pos: 'adj.', definition: '由此引起的', level: 'C1', example: '' },
                { word: 'considerable', pos: 'adj.', definition: '相當大的', level: 'B2', example: '' },
                { word: 'consist', pos: 'v.', definition: '由…組成', level: 'B2', example: '' },
                { word: 'consistent', pos: 'adj.', definition: '一致的；連貫的', level: 'B2', example: '' },
                { word: 'constant', pos: 'adj.', definition: '持續的；不變的', level: 'B2', example: '' },
                { word: 'constitute', pos: 'v.', definition: '構成；組成', level: 'C1', example: '' },
                { word: 'constrain', pos: 'v.', definition: '限制；迫使', level: 'C1', example: '' },
                { word: 'construct', pos: 'v.', definition: '建造；構思', level: 'B2', example: '' },
                { word: 'consult', pos: 'v.', definition: '諮詢；請教', level: 'B2', example: '' },
                { word: 'consume', pos: 'v.', definition: '消耗；花費', level: 'B2', example: '' }
            ],
            'Day 7': [
                { word: 'contemporary', pos: 'adj.', definition: '當代的', level: 'B2', example: '' },
                { word: 'contradict', pos: 'v.', definition: '反駁；矛盾', level: 'C1', example: '' },
                { word: 'contrary', pos: 'adj.', definition: '相反的', level: 'B2', example: '' },
                { word: 'contribute', pos: 'v.', definition: '貢獻；促成', level: 'B2', example: '' },
                { word: 'controversy', pos: 'n.', definition: '爭議', level: 'C1', example: '' },
                { word: 'controversial', pos: 'adj.', definition: '有爭議的', level: 'C1', example: '' },
                { word: 'convert', pos: 'v.', definition: '轉變；改變', level: 'B2', example: '' },
                { word: 'cooperate', pos: 'v.', definition: '合作', level: 'B2', example: '' },
                { word: 'coordinate', pos: 'v.', definition: '協調；整合', level: 'B2', example: '' },
                { word: 'core', pos: 'n./adj.', definition: '核心；主要的', level: 'B2', example: '' },
                { word: 'corporate', pos: 'adj.', definition: '公司的；企業的', level: 'C1', example: '' },
                { word: 'correspond', pos: 'v.', definition: '符合；通信', level: 'B2', example: '' },
                { word: 'criteria', pos: 'n.', definition: '標準（複數）', level: 'C1', example: '' },
                { word: 'crucial', pos: 'adj.', definition: '關鍵的', level: 'B2', example: '' },
                { word: 'currency', pos: 'n.', definition: '貨幣；流通', level: 'B2', example: '' },
                { word: 'current', pos: 'adj./n.', definition: '當前的；潮流', level: 'B1', example: '' },
                { word: 'cycle', pos: 'n./v.', definition: '週期；循環', level: 'B2', example: '' },
                { word: 'data', pos: 'n.', definition: '資料；數據', level: 'B2', example: '' },
                { word: 'debate', pos: 'n./v.', definition: '辯論；爭論', level: 'B2', example: '' },
                { word: 'decline', pos: 'v./n.', definition: '減少；婉拒', level: 'B2', example: '' }
            ],
            'Day 8': [
                { word: 'deduce', pos: 'v.', definition: '推論；演繹', level: 'C1', example: '' },
                { word: 'define', pos: 'v.', definition: '定義', level: 'B2', example: '' },
                { word: 'definite', pos: 'adj.', definition: '明確的', level: 'B2', example: '' },
                { word: 'deliberate', pos: 'adj./v.', definition: '深思熟慮的；故意的', level: 'C1', example: '' },
                { word: 'demonstrate', pos: 'v.', definition: '示範；證明', level: 'B2', example: '' },
                { word: 'denote', pos: 'v.', definition: '表示；象徵', level: 'C1', example: '' },
                { word: 'deny', pos: 'v.', definition: '否認；拒絕', level: 'B2', example: '' },
                { word: 'derive', pos: 'v.', definition: '源自；獲得', level: 'B2', example: '' },
                { word: 'detect', pos: 'v.', definition: '偵測；察覺', level: 'B2', example: '' },
                { word: 'determine', pos: 'v.', definition: '決定；判定', level: 'B2', example: '' },
                { word: 'deviate', pos: 'v.', definition: '偏離；脫離', level: 'C1', example: '' },
                { word: 'device', pos: 'n.', definition: '裝置；設備', level: 'B2', example: '' },
                { word: 'devote', pos: 'v.', definition: '奉獻；投入', level: 'B2', example: '' },
                { word: 'differentiate', pos: 'v.', definition: '區分；區別', level: 'C1', example: '' },
                { word: 'dimension', pos: 'n.', definition: '尺寸；面向', level: 'B2', example: '' },
                { word: 'diminish', pos: 'v.', definition: '減少；削弱', level: 'B2', example: '' },
                { word: 'disaster', pos: 'n.', definition: '災難', level: 'B2', example: '' },
                { word: 'discipline', pos: 'n.', definition: '紀律；學科', level: 'B2', example: '' },
                { word: 'discrete', pos: 'adj.', definition: '分離的；獨立的', level: 'C1', example: '' },
                { word: 'display', pos: 'v./n.', definition: '展示；表現', level: 'B1', example: '' }
            ],
            'Day 9': [
                { word: 'distort', pos: 'v.', definition: '扭曲；曲解', level: 'C1', example: '' },
                { word: 'distribute', pos: 'v.', definition: '分配；分發', level: 'B2', example: '' },
                { word: 'diverse', pos: 'adj.', definition: '多樣的', level: 'B2', example: '' },
                { word: 'diversity', pos: 'n.', definition: '多樣性', level: 'B2', example: '' },
                { word: 'domestic', pos: 'adj.', definition: '家庭的；國內的', level: 'B2', example: '' },
                { word: 'dominant', pos: 'adj.', definition: '佔優勢的', level: 'B2', example: '' },
                { word: 'dominate', pos: 'v.', definition: '支配；主導', level: 'B2', example: '' },
                { word: 'donation', pos: 'n.', definition: '捐贈；捐款', level: 'B2', example: '' },
                { word: 'dynamic', pos: 'adj.', definition: '有活力的', level: 'B2', example: '' },
                { word: 'eager', pos: 'adj.', definition: '渴望的', level: 'B1', example: '' },
                { word: 'eliminate', pos: 'v.', definition: '消除；淘汰', level: 'B2', example: '' },
                { word: 'emerge', pos: 'v.', definition: '出現；浮現', level: 'B2', example: '' },
                { word: 'emotional', pos: 'adj.', definition: '情緒的', level: 'B2', example: '' },
                { word: 'emphasis', pos: 'n.', definition: '強調；重點', level: 'B2', example: '' },
                { word: 'emphasize', pos: 'v.', definition: '強調', level: 'B2', example: '' },
                { word: 'empirical', pos: 'adj.', definition: '經驗的；實證的', level: 'C1', example: '' },
                { word: 'enable', pos: 'v.', definition: '使能夠', level: 'B2', example: '' },
                { word: 'encounter', pos: 'v./n.', definition: '遭遇；相遇', level: 'B2', example: '' },
                { word: 'enforce', pos: 'v.', definition: '執行；實施', level: 'B2', example: '' },
                { word: 'enhance', pos: 'v.', definition: '提升；增強', level: 'B2', example: '' }
            ],
            'Day 10': [
                { word: 'ensure', pos: 'v.', definition: '確保', level: 'B2', example: '' },
                { word: 'enterprise', pos: 'n.', definition: '企業；事業心', level: 'B2', example: '' },
                { word: 'entertain', pos: 'v.', definition: '娛樂；招待', level: 'B1', example: '' },
                { word: 'entire', pos: 'adj.', definition: '整個的；全部的', level: 'B1', example: '' },
                { word: 'entity', pos: 'n.', definition: '實體；存在', level: 'C1', example: '' },
                { word: 'environmental', pos: 'adj.', definition: '環境的', level: 'B2', example: '' },
                { word: 'equivalent', pos: 'adj./n.', definition: '相等的；等值物', level: 'B2', example: '' },
                { word: 'estimate', pos: 'v./n.', definition: '估計；評價', level: 'B2', example: '' },
                { word: 'evaluate', pos: 'v.', definition: '評估；判斷', level: 'B2', example: '' },
                { word: 'evident', pos: 'adj.', definition: '明顯的', level: 'B2', example: '' },
                { word: 'evidence', pos: 'n.', definition: '證據', level: 'B2', example: '' },
                { word: 'evolution', pos: 'n.', definition: '演化；進化', level: 'B2', example: '' },
                { word: 'evolve', pos: 'v.', definition: '演化；發展', level: 'B2', example: '' },
                { word: 'exceed', pos: 'v.', definition: '超過', level: 'B2', example: '' },
                { word: 'exclude', pos: 'v.', definition: '排除；不包括', level: 'B2', example: '' },
                { word: 'exhibit', pos: 'v./n.', definition: '展示；展覽', level: 'B2', example: '' },
                { word: 'expand', pos: 'v.', definition: '擴展；擴大', level: 'B2', example: '' },
                { word: 'expectation', pos: 'n.', definition: '期望', level: 'B2', example: '' },
                { word: 'expertise', pos: 'n.', definition: '專業知識；專長', level: 'C1', example: '' },
                { word: 'explicit', pos: 'adj.', definition: '明確的', level: 'C1', example: '' }
            ],
            'Day 11': [
                { word: 'exploit', pos: 'v.', definition: '利用；開發', level: 'C1', example: '' },
                { word: 'explore', pos: 'v.', definition: '探索；探討', level: 'B2', example: '' },
                { word: 'expose', pos: 'v.', definition: '暴露；揭露', level: 'B2', example: '' },
                { word: 'exposure', pos: 'n.', definition: '暴露；揭露', level: 'B2', example: '' },
                { word: 'extend', pos: 'v.', definition: '延伸；延長', level: 'B2', example: '' },
                { word: 'external', pos: 'adj.', definition: '外部的、外來的', level: 'B2', example: '' },
                { word: 'extraordinary', pos: 'adj.', definition: '非凡的', level: 'B2', example: '' },
                { word: 'extract', pos: 'v./n.', definition: '提取；摘錄', level: 'B2', example: '' },
                { word: 'facility', pos: 'n.', definition: '設施；能力', level: 'B2', example: '' },
                { word: 'factor', pos: 'n.', definition: '因素', level: 'B2', example: '' },
                { word: 'federal', pos: 'adj.', definition: '聯邦的', level: 'C1', example: '' },
                { word: 'feedback', pos: 'n.', definition: '回饋', level: 'B2', example: '' },
                { word: 'fellow', pos: 'adj./n.', definition: '同伴的；夥伴', level: 'B1', example: '' },
                { word: 'finance', pos: 'n./v.', definition: '財務、資金', level: 'B2', example: '' },
                { word: 'flexible', pos: 'adj.', definition: '有彈性的；可變通的', level: 'B2', example: '' },
                { word: 'fluctuate', pos: 'v.', definition: '波動；變化', level: 'C1', example: '' },
                { word: 'focus', pos: 'v./n.', definition: '專注；焦點', level: 'B1', example: '' },
                { word: 'forecast', pos: 'v./n.', definition: '預測', level: 'B2', example: '' },
                { word: 'forthcoming', pos: 'adj.', definition: '即將到來的', level: 'C1', example: '' },
                { word: 'foundation', pos: 'n.', definition: '基礎；基金會', level: 'B2', example: '' }
            ],
            'Day 12': [
                { word: 'framework', pos: 'n.', definition: '框架；體系', level: 'B2', example: '' },
                { word: 'fulfill', pos: 'v.', definition: '實現；履行', level: 'B2', example: '' },
                { word: 'fund', pos: 'n./v.', definition: '資金；資助', level: 'B2', example: '' },
                { word: 'function', pos: 'n.', definition: '功能；職責', level: 'B1', example: '' },
                { word: 'fundamental', pos: 'adj.', definition: '基本的；根本的', level: 'B2', example: '' },
                { word: 'generate', pos: 'v.', definition: '產生；引起', level: 'B2', example: '' },
                { word: 'global', pos: 'adj.', definition: '全球的', level: 'B1', example: '' },
                { word: 'grant', pos: 'v./n.', definition: '授予；補助金', level: 'B2', example: '' },
                { word: 'guarantee', pos: 'v./n.', definition: '保證；擔保', level: 'B2', example: '' },
                { word: 'hierarchy', pos: 'n.', definition: '階層；層級制度', level: 'C1', example: '' },
                { word: 'identical', pos: 'adj.', definition: '相同的', level: 'B2', example: '' },
                { word: 'ideology', pos: 'n.', definition: '意識形態', level: 'C1', example: '' },
                { word: 'illustrate', pos: 'v.', definition: '說明、舉例', level: 'B2', example: '' },
                { word: 'impact', pos: 'n./v.', definition: '影響；衝擊', level: 'B2', example: '' },
                { word: 'implement', pos: 'v.', definition: '實施、執行', level: 'C1', example: '' },
                { word: 'implicit', pos: 'adj.', definition: '含蓄的；隱含的', level: 'C1', example: '' },
                { word: 'imply', pos: 'v.', definition: '暗示、意味著', level: 'B2', example: '' },
                { word: 'incentive', pos: 'n.', definition: '刺激；動機', level: 'B2', example: '' },
                { word: 'incidence', pos: 'n.', definition: '發生率；影響範圍', level: 'C1', example: '' },
                { word: 'incident', pos: 'n.', definition: '事件', level: 'B2', example: '' }
            ],
            'Day 13': [
                { word: 'income', pos: 'n.', definition: '收入', level: 'B1', example: '' },
                { word: 'incorporate', pos: 'v.', definition: '納入；合併', level: 'B2', example: '' },
                { word: 'index', pos: 'n.', definition: '索引；指標', level: 'B2', example: '' },
                { word: 'indicate', pos: 'v.', definition: '表示；指出', level: 'B2', example: '' },
                { word: 'individual', pos: 'n./adj.', definition: '個人；個別的', level: 'B1', example: '' },
                { word: 'inevitable', pos: 'adj.', definition: '不可避免的', level: 'B2', example: '' },
                { word: 'influence', pos: 'n./v.', definition: '影響', level: 'B1', example: '' },
                { word: 'infrastructure', pos: 'n.', definition: '基礎建設', level: 'C1', example: '' },
                { word: 'initial', pos: 'adj./n.', definition: '最初的；首字母', level: 'B2', example: '' },
                { word: 'initiate', pos: 'v.', definition: '開始；啟動', level: 'B2', example: '' },
                { word: 'inhibit', pos: 'v.', definition: '抑制；限制', level: 'C1', example: '' },
                { word: 'innovation', pos: 'n.', definition: '創新', level: 'B2', example: '' },
                { word: 'input', pos: 'n./v.', definition: '輸入；投入', level: 'B2', example: '' },
                { word: 'insight', pos: 'n.', definition: '洞察力', level: 'B2', example: '' },
                { word: 'inspect', pos: 'v.', definition: '檢查', level: 'B2', example: '' },
                { word: 'inspire', pos: 'v.', definition: '激勵；啟發', level: 'B2', example: '' },
                { word: 'instance', pos: 'n.', definition: '例子；實例', level: 'B2', example: '' },
                { word: 'institute', pos: 'n./v.', definition: '機構；設立', level: 'B2', example: '' },
                { word: 'instruct', pos: 'v.', definition: '指導；命令', level: 'B2', example: '' },
                { word: 'integral', pos: 'adj.', definition: '不可或缺的；整體的', level: 'B2', example: '' }
            ],
            'Day 14': [
                { word: 'integrate', pos: 'v.', definition: '整合、融合', level: 'B2', example: '' },
                { word: 'integrity', pos: 'n.', definition: '誠信；正直', level: 'C1', example: '' },
                { word: 'internal', pos: 'adj.', definition: '內部的', level: 'B2', example: '' },
                { word: 'interpret', pos: 'v.', definition: '解釋；翻譯', level: 'B2', example: '' },
                { word: 'intervene', pos: 'v.', definition: '干預；介入', level: 'C1', example: '' },
                { word: 'intrinsic', pos: 'adj.', definition: '內在的；本質的', level: 'C1', example: '' },
                { word: 'investigate', pos: 'v.', definition: '調查；研究', level: 'B2', example: '' },
                { word: 'invest', pos: 'v.', definition: '投資', level: 'B1', example: '' },
                { word: 'involve', pos: 'v.', definition: '涉及；包含', level: 'B1', example: '' },
                { word: 'isolate', pos: 'v.', definition: '隔離；孤立', level: 'B2', example: '' },
                { word: 'journal', pos: 'n.', definition: '期刊；日誌', level: 'B2', example: '' },
                { word: 'justify', pos: 'v.', definition: '辯解；證明合理', level: 'B2', example: '' },
                { word: 'labor', pos: 'n.', definition: '勞動；勞工', level: 'B2', example: '' },
                { word: 'landscape', pos: 'n.', definition: '風景；地貌', level: 'B1', example: '' },
                { word: 'layer', pos: 'n.', definition: '層；階層', level: 'B2', example: '' },
                { word: 'legal', pos: 'adj.', definition: '法律的；合法的', level: 'B2', example: '' },
                { word: 'legisla', pos: 'v.', definition: '立法', level: 'C1', example: '' },
                { word: 'legislation', pos: 'n.', definition: '法律、立法', level: 'C1', example: '' },
                { word: 'legislate', pos: 'v.', definition: '立法', level: 'C1', example: '' },
                { word: 'leisure', pos: 'n.', definition: '休閒', level: 'B1', example: '' }
            ],
            'Day 15': [
                { word: 'levy', pos: 'n./v.', definition: '徵收（稅等）', level: 'C1', example: '' },
                { word: 'maintain', pos: 'v.', definition: '維持、主張', level: 'B2', example: '' },
                { word: 'manipulate', pos: 'v.', definition: '操控；巧妙運用', level: 'B2', example: '' },
                { word: 'manual', pos: 'adj./n.', definition: '手動的；手冊', level: 'B2', example: '' },
                { word: 'margin', pos: 'n.', definition: '邊緣；利潤', level: 'B2', example: '' },
                { word: 'mature', pos: 'adj./v.', definition: '成熟的；成熟', level: 'B2', example: '' },
                { word: 'mechanism', pos: 'n.', definition: '機制；結構', level: 'B2', example: '' },
                { word: 'media', pos: 'n.', definition: '媒體', level: 'B2', example: '' },
                { word: 'mediate', pos: 'v.', definition: '調解；仲裁', level: 'C1', example: '' },
                { word: 'modify', pos: 'v.', definition: '修改；調整', level: 'B2', example: '' },
                { word: 'monitor', pos: 'v./n.', definition: '監控；監視器', level: 'B2', example: '' },
                { word: 'motivate', pos: 'v.', definition: '激勵；促使', level: 'B2', example: '' },
                { word: 'mutual', pos: 'adj.', definition: '互相的；共同的', level: 'B2', example: '' },
                { word: 'negate', pos: 'v.', definition: '否定；使無效', level: 'C1', example: '' },
                { word: 'negotiate', pos: 'v.', definition: '協商、談判', level: 'B2', example: '' },
                { word: 'network', pos: 'n.', definition: '網絡；人際網絡', level: 'B2', example: '' },
                { word: 'nevertheless', pos: 'adv.', definition: '然而；儘管如此', level: 'B2', example: '' },
                { word: 'norm', pos: 'n.', definition: '規範；標準', level: 'C1', example: '' },
                { word: 'notion', pos: 'n.', definition: '想法；概念', level: 'B2', example: '' },
                { word: 'objective', pos: 'n./adj.', definition: '目標；客觀的', level: 'B2', example: '' }
            ],
            'Day 16': [
                { word: 'obtain', pos: 'v.', definition: '獲得', level: 'B2', example: '' },
                { word: 'obvious', pos: 'adj.', definition: '明顯的', level: 'B1', example: '' },
                { word: 'occupy', pos: 'v.', definition: '佔據；使忙碌', level: 'B2', example: '' },
                { word: 'occur', pos: 'v.', definition: '發生', level: 'B1', example: '' },
                { word: 'ongoing', pos: 'adj.', definition: '持續進行的', level: 'B2', example: '' },
                { word: 'operate', pos: 'v.', definition: '操作；運作', level: 'B1', example: '' },
                { word: 'opponent', pos: 'n.', definition: '對手', level: 'B2', example: '' },
                { word: 'orient', pos: 'v.', definition: '使朝向；使適應', level: 'B2', example: '' },
                { word: 'outcome', pos: 'n.', definition: '結果；成果', level: 'B2', example: '' },
                { word: 'output', pos: 'n.', definition: '輸出；產量', level: 'B2', example: '' },
                { word: 'overall', pos: 'adj./adv.', definition: '整體的；全部地', level: 'B2', example: '' },
                { word: 'overlap', pos: 'v./n.', definition: '重疊；交叉', level: 'B2', example: '' },
                { word: 'overcome', pos: 'v.', definition: '克服', level: 'B2', example: '' },
                { word: 'paradigm', pos: 'n.', definition: '範例；模式', level: 'C1', example: '' },
                { word: 'parameter', pos: 'n.', definition: '參數；範圍', level: 'C1', example: '' },
                { word: 'participate', pos: 'v.', definition: '參與；參加', level: 'B1', example: '' },
                { word: 'perceive', pos: 'v.', definition: '察覺；理解', level: 'B2', example: '' },
                { word: 'persist', pos: 'v.', definition: '持續；堅持', level: 'B2', example: '' },
                { word: 'perspective', pos: 'n.', definition: '觀點；遠景', level: 'B2', example: '' },
                { word: 'phenomenon', pos: 'n.', definition: '現象', level: 'B2', example: '' }
            ],
            'Day 17': [
                { word: 'philosophy', pos: 'n.', definition: '哲學；人生觀', level: 'B2', example: '' },
                { word: 'physical', pos: 'adj.', definition: '身體的；物理的', level: 'B1', example: '' },
                { word: 'policy', pos: 'n.', definition: '政策；方針', level: 'B2', example: '' },
                { word: 'portion', pos: 'n.', definition: '一部分；份量', level: 'B2', example: '' },
                { word: 'potential', pos: 'adj./n.', definition: '潛在的；潛力', level: 'B2', example: '' },
                { word: 'poverty', pos: 'n.', definition: '貧窮', level: 'B2', example: '' },
                { word: 'practical', pos: 'adj.', definition: '實際的；實用的', level: 'B2', example: '' },
                { word: 'practitioner', pos: 'n.', definition: '從業者', level: 'C1', example: '' },
                { word: 'precede', pos: 'v.', definition: '在…之前；優於', level: 'C1', example: '' },
                { word: 'precise', pos: 'adj.', definition: '精確的', level: 'B2', example: '' },
                { word: 'predict', pos: 'v.', definition: '預測', level: 'B1', example: '' },
                { word: 'preference', pos: 'n.', definition: '偏好；優先', level: 'B2', example: '' },
                { word: 'preliminary', pos: 'adj.', definition: '初步的；預備的', level: 'C1', example: '' },
                { word: 'premise', pos: 'n.', definition: '前提；假設', level: 'C1', example: '' },
                { word: 'preserve', pos: 'v.', definition: '保護；維持', level: 'B2', example: '' },
                { word: 'pressure', pos: 'n.', definition: '壓力', level: 'B1', example: '' },
                { word: 'presume', pos: 'v.', definition: '假設；推測', level: 'C1', example: '' },
                { word: 'previous', pos: 'adj.', definition: '先前的', level: 'B1', example: '' },
                { word: 'primary', pos: 'adj.', definition: '主要的；初級的', level: 'B1', example: '' },
                { word: 'prime', pos: 'adj.', definition: '主要的；首要的', level: 'B2', example: '' }
            ],
            'Day 18': [
                { word: 'principal', pos: 'adj./n.', definition: '主要的；校長', level: 'B2', example: '' },
                { word: 'principle', pos: 'n.', definition: '原則', level: 'B2', example: '' },
                { word: 'priority', pos: 'n.', definition: '優先；優先權', level: 'B2', example: '' },
                { word: 'procedure', pos: 'n.', definition: '程序；步驟', level: 'B2', example: '' },
                { word: 'proceed', pos: 'v.', definition: '繼續；進行', level: 'B2', example: '' },
                { word: 'profession', pos: 'n.', definition: '職業；專業', level: 'B1', example: '' },
                { word: 'prohibit', pos: 'v.', definition: '禁止', level: 'B2', example: '' },
                { word: 'promote', pos: 'v.', definition: '促進；推廣', level: 'B2', example: '' },
                { word: 'proportion', pos: 'n.', definition: '比例；部分', level: 'B2', example: '' },
                { word: 'prospect', pos: 'n.', definition: '前景；期望', level: 'B2', example: '' },
                { word: 'psychological', pos: 'adj.', definition: '心理的', level: 'B2', example: '' },
                { word: 'psychology', pos: 'n.', definition: '心理學', level: 'B2', example: '' },
                { word: 'publication', pos: 'n.', definition: '出版物；發表', level: 'B2', example: '' },
                { word: 'purchase', pos: 'v./n.', definition: '購買', level: 'B2', example: '' },
                { word: 'pursue', pos: 'v.', definition: '追求；追趕', level: 'B2', example: '' },
                { word: 'qualitative', pos: 'adj.', definition: '質的；性質上的', level: 'C1', example: '' },
                { word: 'quantitative', pos: 'adj.', definition: '量的；數量的', level: 'C1', example: '' },
                { word: 'quote', pos: 'v./n.', definition: '引用；報價', level: 'B2', example: '' },
                { word: 'radical', pos: 'adj.', definition: '根本的；激進的', level: 'C1', example: '' },
                { word: 'range', pos: 'n./v.', definition: '範圍；分佈', level: 'B1', example: '' }
            ],
            'Day 19': [
                { word: 'react', pos: 'v.', definition: '反應', level: 'B1', example: '' },
                { word: 'recall', pos: 'v.', definition: '回想；召回', level: 'B2', example: '' },
                { word: 'recover', pos: 'v.', definition: '恢復', level: 'B1', example: '' },
                { word: 'reduce', pos: 'v.', definition: '減少', level: 'B1', example: '' },
                { word: 'reflect', pos: 'v.', definition: '反映；反省', level: 'B2', example: '' },
                { word: 'reform', pos: 'n./v.', definition: '改革', level: 'B2', example: '' },
                { word: 'refine', pos: 'v.', definition: '精煉；改善', level: 'B2', example: '' },
                { word: 'regard', pos: 'v./n.', definition: '認為；關心', level: 'B2', example: '' },
                { word: 'register', pos: 'v./n.', definition: '登記；註冊', level: 'B2', example: '' },
                { word: 'regime', pos: 'n.', definition: '政權；制度', level: 'C1', example: '' },
                { word: 'regulate', pos: 'v.', definition: '管制；調節', level: 'B2', example: '' },
                { word: 'reinforce', pos: 'v.', definition: '強化；鞏固', level: 'B2', example: '' },
                { word: 'reject', pos: 'v.', definition: '拒絕', level: 'B2', example: '' },
                { word: 'relate', pos: 'v.', definition: '有關；講述', level: 'B2', example: '' },
                { word: 'relax', pos: 'v.', definition: '放鬆', level: 'A2', example: '' },
                { word: 'release', pos: 'v./n.', definition: '釋放；發表', level: 'B2', example: '' },
                { word: 'relevant', pos: 'adj.', definition: '有關的', level: 'B2', example: '' },
                { word: 'reluctance', pos: 'n.', definition: '不情願；勉強', level: 'C1', example: '' },
                { word: 'rely', pos: 'v.', definition: '依賴；信任', level: 'B2', example: '' },
                { word: 'remove', pos: 'v.', definition: '移除', level: 'A2', example: '' }
            ],
            'Day 20': [
                { word: 'require', pos: 'v.', definition: '需要；要求', level: 'B1', example: '' },
                { word: 'research', pos: 'n./v.', definition: '研究', level: 'B1', example: '' },
                { word: 'reside', pos: 'v.', definition: '居住；存在於', level: 'B2', example: '' },
                { word: 'resolve', pos: 'v.', definition: '解決；決定', level: 'B2', example: '' },
                { word: 'resource', pos: 'n.', definition: '資源', level: 'B1', example: '' },
                { word: 'respond', pos: 'v.', definition: '回應', level: 'B1', example: '' },
                { word: 'restore', pos: 'v.', definition: '恢復；修復', level: 'B2', example: '' },
                { word: 'restrict', pos: 'v.', definition: '限制', level: 'B2', example: '' },
                { word: 'retain', pos: 'v.', definition: '保留；維持', level: 'B2', example: '' },
                { word: 'reveal', pos: 'v.', definition: '揭示；透露', level: 'B2', example: '' },
                { word: 'revenue', pos: 'n.', definition: '收入；稅收', level: 'B2', example: '' },
                { word: 'revise', pos: 'v.', definition: '修訂；複習', level: 'B2', example: '' },
                { word: 'revolution', pos: 'n.', definition: '革命', level: 'B2', example: '' },
                { word: 'rigid', pos: 'adj.', definition: '嚴格的；僵硬的', level: 'C1', example: '' },
                { word: 'role', pos: 'n.', definition: '角色；作用', level: 'B1', example: '' },
                { word: 'route', pos: 'n.', definition: '路線；途徑', level: 'B2', example: '' },
                { word: 'rural', pos: 'adj.', definition: '鄉村的', level: 'B2', example: '' },
                { word: 'scenario', pos: 'n.', definition: '情境；劇本', level: 'B2', example: '' },
                { word: 'schedule', pos: 'n./v.', definition: '時程表；安排', level: 'B1', example: '' },
                { word: 'scheme', pos: 'n.', definition: '計畫；陰謀', level: 'B2', example: '' }
            ],
            'Day 21': [
                { word: 'scope', pos: 'n.', definition: '範圍；領域', level: 'B2', example: '' },
                { word: 'section', pos: 'n.', definition: '部分；區域', level: 'B1', example: '' },
                { word: 'sector', pos: 'n.', definition: '部門；領域', level: 'B2', example: '' },
                { word: 'secure', pos: 'v./adj.', definition: '保護；安全的', level: 'B2', example: '' },
                { word: 'seek', pos: 'v.', definition: '尋找；追求', level: 'B2', example: '' },
                { word: 'select', pos: 'v.', definition: '選擇', level: 'B1', example: '' },
                { word: 'sequence', pos: 'n.', definition: '順序；連續', level: 'B2', example: '' },
                { word: 'series', pos: 'n.', definition: '系列；影集', level: 'B1', example: '' },
                { word: 'shift', pos: 'n./v.', definition: '轉變；改變', level: 'B2', example: '' },
                { word: 'significance', pos: 'n.', definition: '重要性；意義', level: 'B2', example: '' },
                { word: 'significant', pos: 'adj.', definition: '重要的', level: 'B2', example: '' },
                { word: 'similar', pos: 'adj.', definition: '相似的', level: 'B1', example: '' },
                { word: 'simulate', pos: 'v.', definition: '模擬；假裝', level: 'C1', example: '' },
                { word: 'site', pos: 'n.', definition: '地點；網站', level: 'B2', example: '' },
                { word: 'sole', pos: 'adj.', definition: '唯一的；單獨的', level: 'B2', example: '' },
                { word: 'source', pos: 'n.', definition: '來源', level: 'B1', example: '' },
                { word: 'specify', pos: 'v.', definition: '明確指出', level: 'B2', example: '' },
                { word: 'stable', pos: 'adj.', definition: '穩定的', level: 'B2', example: '' },
                { word: 'statistic', pos: 'n.', definition: '統計數據', level: 'B2', example: '' },
                { word: 'status', pos: 'n.', definition: '身分；地位', level: 'B2', example: '' }
            ],
            'Day 22': [
                { word: 'straightforward', pos: 'adj.', definition: '直接的；坦率的', level: 'C1', example: '' },
                { word: 'strategy', pos: 'n.', definition: '策略', level: 'B2', example: '' },
                { word: 'stress', pos: 'n./v.', definition: '壓力；強調', level: 'B1', example: '' },
                { word: 'structure', pos: 'n.', definition: '結構；體系', level: 'B2', example: '' },
                { word: 'style', pos: 'n.', definition: '風格', level: 'A2', example: '' },
                { word: 'submit', pos: 'v.', definition: '提交；屈服', level: 'B2', example: '' },
                { word: 'subordinate', pos: 'adj./n.', definition: '次要的；下屬', level: 'C1', example: '' },
                { word: 'subsequent', pos: 'adj.', definition: '隨後的；接下來的', level: 'C1', example: '' },
                { word: 'substance', pos: 'n.', definition: '物質；實質', level: 'B2', example: '' },
                { word: 'substitute', pos: 'v./n.', definition: '替代；代用品', level: 'B2', example: '' },
                { word: 'sufficient', pos: 'adj.', definition: '足夠的', level: 'B2', example: '' },
                { word: 'sum', pos: 'n./v.', definition: '總和；概括', level: 'B1', example: '' },
                { word: 'summary', pos: 'n.', definition: '摘要', level: 'B2', example: '' },
                { word: 'supplement', pos: 'n./v.', definition: '補充；增補', level: 'B2', example: '' },
                { word: 'survey', pos: 'n./v.', definition: '調查；檢視', level: 'B2', example: '' },
                { word: 'survive', pos: 'v.', definition: '生存', level: 'B1', example: '' },
                { word: 'sustain', pos: 'v.', definition: '維持；支撐', level: 'B2', example: '' },
                { word: 'symbol', pos: 'n.', definition: '象徵', level: 'B1', example: '' },
                { word: 'symbolize', pos: 'v.', definition: '象徵', level: 'B2', example: '' },
                { word: 'target', pos: 'n./v.', definition: '目標；鎖定', level: 'B2', example: '' }
            ],
            'Day 23': [
                { word: 'task', pos: 'n.', definition: '任務', level: 'A2', example: '' },
                { word: 'team', pos: 'n.', definition: '團隊', level: 'A2', example: '' },
                { word: 'technical', pos: 'adj.', definition: '技術的', level: 'B2', example: '' },
                { word: 'technique', pos: 'n.', definition: '技巧；技術', level: 'B2', example: '' },
                { word: 'technology', pos: 'n.', definition: '科技', level: 'B1', example: '' },
                { word: 'temporary', pos: 'adj.', definition: '暫時的', level: 'B1', example: '' },
                { word: 'tend', pos: 'v.', definition: '傾向；照料', level: 'B1', example: '' },
                { word: 'tense', pos: 'adj./n.', definition: '緊張的；時態', level: 'B2', example: '' },
                { word: 'tension', pos: 'n.', definition: '緊張；張力', level: 'B2', example: '' },
                { word: 'terminate', pos: 'v.', definition: '結束；終止', level: 'C1', example: '' },
                { word: 'theory', pos: 'n.', definition: '理論', level: 'B1', example: '' },
                { word: 'transform', pos: 'v.', definition: '轉變；改造', level: 'B2', example: '' },
                { word: 'transition', pos: 'n.', definition: '過渡；轉變', level: 'B2', example: '' },
                { word: 'transmit', pos: 'v.', definition: '傳送；傳染', level: 'B2', example: '' },
                { word: 'trend', pos: 'n.', definition: '趨勢；潮流', level: 'B2', example: '' },
                { word: 'trigger', pos: 'v./n.', definition: '觸發；引起', level: 'B2', example: '' },
                { word: 'ultimate', pos: 'adj.', definition: '最終的；根本的', level: 'B2', example: '' },
                { word: 'undergo', pos: 'v.', definition: '經歷；接受', level: 'C1', example: '' },
                { word: 'underlying', pos: 'adj.', definition: '潛在的；基礎的', level: 'C1', example: '' },
                { word: 'undertake', pos: 'v.', definition: '承擔；從事', level: 'C1', example: '' }
            ],
            'Day 24': [
                { word: 'unify', pos: 'v.', definition: '統一；整合', level: 'B2', example: '' },
                { word: 'unique', pos: 'adj.', definition: '獨特的', level: 'B1', example: '' },
                { word: 'utilize', pos: 'v.', definition: '利用；應用', level: 'B2', example: '' },
                { word: 'valid', pos: 'adj.', definition: '有效的；有根據的', level: 'B2', example: '' },
                { word: 'vary', pos: 'v.', definition: '變化；不同', level: 'B2', example: '' },
                { word: 'version', pos: 'n.', definition: '版本；說法', level: 'B2', example: '' },
                { word: 'via', pos: 'prep.', definition: '經由；透過', level: 'B2', example: '' },
                { word: 'violate', pos: 'v.', definition: '違反；侵犯', level: 'B2', example: '' },
                { word: 'virtual', pos: 'adj.', definition: '虛擬的；幾乎的', level: 'B2', example: '' },
                { word: 'visible', pos: 'adj.', definition: '可見的；明顯的', level: 'B2', example: '' },
                { word: 'volume', pos: 'n.', definition: '音量；體積；冊', level: 'B1', example: '' },
                { word: 'voluntary', pos: 'adj.', definition: '自願的', level: 'B2', example: '' },
                { word: 'welfare', pos: 'n.', definition: '福利；福祉', level: 'B2', example: '' },
                { word: 'whereas', pos: 'conj.', definition: '然而；而', level: 'B2', example: '' },
                { word: 'widespread', pos: 'adj.', definition: '廣泛的；普遍的', level: 'B2', example: '' }
            ]
        };


        // --- 漸層色彩 ---
        const gradients = [
            'gradient-1', 'gradient-2', 'gradient-3', 'gradient-4', 'gradient-5',
            'gradient-6', 'gradient-7', 'gradient-8', 'gradient-9', 'gradient-10'
        ];

        // --- DOM 節點 ---
        const sidebar = document.getElementById('sidebar');
        const sidebarNav = document.getElementById('sidebar-nav');
        const vocabGrid = document.getElementById('vocab-grid');
        const mainTitle = document.getElementById('main-title');
        const sidebarToggleBtn = document.getElementById('sidebar-toggle-btn');
        const sidebarCloseBtn = document.getElementById('sidebar-close-btn');
        const overlay = document.getElementById('overlay');
        let currentDay = 'Day 1'; // 預設顯示 Day 1
        
        // --- 新增：練習模式 DOM 節點 ---
        const mainContentArea = document.getElementById('main-content-area');
        const mainFooter = document.getElementById('main-footer');
        const quizModal = document.getElementById('quiz-setup-modal');
        const quizModalBackdrop = quizModal.querySelector('.modal-backdrop');
        const quizModalContent = quizModal.querySelector('.modal');
        const startQuizModalBtn = document.getElementById('start-quiz-modal-btn');
        const closeQuizModalBtn = document.getElementById('close-quiz-modal-btn');
        const daySelectionGrid = document.getElementById('day-selection-grid');
        const toggleAllDaysBtn = document.getElementById('toggle-all-days-btn');
        const startQuizBtn = document.getElementById('start-quiz-btn');
        const quizSetupError = document.getElementById('quiz-setup-error');
        const streakEffectEl = document.getElementById('streak-effect');
        
        // --- 新增：練習狀態變數 ---
        let quizState = {
            words: [],
            quizType: 'en-to-zh', // 'en-to-zh' 或 'zh-to-en'
            currentIndex: 0,
            streak: 0,
            correctAnswers: 0,
            totalQuestions: 0
        };


        // --- 函式 ---

        /**
         * 隨機打亂陣列 (Fisher-Yates Shuffle)
         */
        function shuffleArray(array) {
            let currentIndex = array.length,  randomIndex;
            // 當還剩下元素需要洗牌時
            while (currentIndex != 0) {
                // 選一個剩下的元素
                randomIndex = Math.floor(Math.random() * currentIndex);
                currentIndex--;
                // 交換它和當前的元素
                [array[currentIndex], array[randomIndex]] = [
                array[randomIndex], array[currentIndex]];
            }
            return array;
        }

        /**
         * 渲染單字卡到網格中 (瀏覽模式)
         */
        function renderVocabGrid(dayKey) {
            // 確保我們在瀏覽模式
            exitQuizMode(false); // 呼叫退出練習模式 (但不重新渲染)
            
            vocabGrid.innerHTML = '';

             let words = vocabData[dayKey];
             if (!words) {
                 vocabGrid.innerHTML = '<p class="text-gray-500">沒有這個天數的單字資料。</p>';
                return;
            }
 
             mainTitle.textContent = `高中英文單字練習 - ${dayKey}`;
              
             document.querySelectorAll('.sidebar-link').forEach(link => {
                const day = link.dataset.day;
                const gradient = link.dataset.gradient;
                if (day === dayKey) {
                    link.classList.add('active', gradient);
                } else {
                    link.classList.remove('active', gradient);
                }
            });

            if (words.length === 0) {
                vocabGrid.innerHTML = `<p class="text-gray-500 col-span-full text-center">此天數沒有單字。</p>`;
                return;
            }

            words.forEach(wordData => {
                const cardContainer = createWordCard(wordData);
                vocabGrid.appendChild(cardContainer);
            });
        } 

        /**
         * 建立一張單字卡 DOM 元素 (瀏覽模式用)
         */
        function createWordCard(wordData) {
            const cardContainer = document.createElement('div');
            cardContainer.className = 'flashcard-container h-48 rounded-lg';
            cardContainer.tabIndex = 0; 

            let mnemonicHTML = '';
            if (wordData.mnemonic) {
                mnemonicHTML = `
                    <div class="mnemonic-section" style="display: none;">
                        <hr class="my-2 border-gray-200 w-3/4 mx-auto">
                        <div class="text-sm text-purple-700 px-2">
                            <strong class="text-purple-800">⭐ 趣味拆解</strong>
                            <p class="mt-1">${wordData.mnemonic}</p>
                        </div>
                    </div>
                `;
            }
            
            let exampleHTML = '';
            if (wordData.example) {
                exampleHTML = `<p class="text-sm text-gray-500 mt-2 italic px-2">${wordData.example}</p>`;
            }

            cardContainer.innerHTML = `
                <div class="flashcard-inner">
                    <div class="card-front p-4 text-center">
                        <h2 class="text-3xl font-bold text-gray-800">${wordData.word}</h2>
                    </div>
                    <div class="card-back">
                        <div class="text-gray-500 text-sm">${wordData.level}</div>
                        <h3 class="text-xl font-bold">${wordData.word}</h3>
                        <p class="text-md text-gray-700">${wordData.pos} ${wordData.definition}</p>
                        ${exampleHTML}
                        ${mnemonicHTML}
                    </div>
                </div>
            `;

            const cardInner = cardContainer.querySelector('.flashcard-inner');
            const mnemonicSection = cardContainer.querySelector('.mnemonic-section');
            cardContainer.dataset.flipState = '0'; 

            const handleInteraction = (e) => {
                if (e.type === 'keydown' && e.key !== 'Enter' && e.key !== ' ') {
                    return;
                }
                e.preventDefault(); 

                let state = parseInt(cardContainer.dataset.flipState, 10);

                if (state === 0) {
                    cardInner.style.transform = 'rotateY(180deg)';
                    cardContainer.dataset.flipState = '1';
                } else if (state === 1) {
                    if (mnemonicSection) {
                        mnemonicSection.style.display = 'block';
                        cardContainer.dataset.flipState = '2';
                    } else {
                        cardInner.style.transform = 'rotateY(0deg)';
                        cardContainer.dataset.flipState = '0';
                    }
                } else if (state === 2) {
                    if (mnemonicSection) {
                        mnemonicSection.style.display = 'none';
                    }
                    cardInner.style.transform = 'rotateY(0deg)';
                    cardContainer.dataset.flipState = '0';
                }
            };
            
            cardContainer.addEventListener('click', handleInteraction);
            cardContainer.addEventListener('keydown', handleInteraction);

            return cardContainer;
        }

        /**
         * 渲染全局搜尋結果 (瀏覽模式)
         */
        function renderGlobalSearchResults(searchTerm) {
            // 搜尋時也退出練習模式
            exitQuizMode(false);
            
            vocabGrid.innerHTML = '';
            mainTitle.textContent = `搜尋 "${searchTerm}" 的結果`;
            document.querySelectorAll('.sidebar-link').forEach(link => {
                link.classList.remove('active', link.dataset.gradient);
            });

            const allWords = Object.values(vocabData).flat(); 
            const searchTermLower = searchTerm.toLowerCase();
            const filteredWords = allWords.filter(wordData =>
                wordData.word.toLowerCase().includes(searchTermLower) ||
                wordData.definition.toLowerCase().includes(searchTermLower)
            );

            if (filteredWords.length === 0) {
                vocabGrid.innerHTML = `<p class="text-gray-500 col-span-full text-center">在所有天數中，找不到包含 "${searchTerm}" 的單字。</p>`;
                return;
            }

            filteredWords.forEach(wordData => {
                const cardContainer = createWordCard(wordData);
                vocabGrid.appendChild(cardContainer);
            });
        }

        /**
         * 渲染側邊欄導覽
         */
        function renderSidebar() {
            const days = Object.keys(vocabData);
            days.forEach((day, index) => {
                const link = document.createElement('a');
                link.href = '#';
                link.textContent = day;
                link.dataset.day = day; 
                link.dataset.gradient = gradients[index % gradients.length];
                link.className = 'sidebar-link block p-3 rounded-lg text-gray-700';
                
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    document.getElementById('search-bar').value = '';
                    currentDay = day;
                    renderVocabGrid(currentDay); // renderVocabGrid 會自動退出練習模式
                    
                    if (window.innerWidth < 768) {
                        sidebar.classList.remove('open');
                        overlay.classList.add('hidden');
                    }
                });
                sidebarNav.appendChild(link);
            });
        }

        /**
         * 處理側邊欄開關 (行動裝置)
         */
        function setupSidebarToggle() {
            sidebarToggleBtn.addEventListener('click', () => {
                sidebar.classList.add('open');
                overlay.classList.remove('hidden');
            });

            sidebarCloseBtn.addEventListener('click', () => {
                sidebar.classList.remove('open');
                overlay.classList.add('hidden');
            });

            // 遮罩也用於 Modal
            overlay.addEventListener('click', () => {
                // 關閉側邊欄
                sidebar.classList.remove('open');
                // 關閉 Modal
                closeQuizModal();
                // 隱藏遮罩
                overlay.classList.add('hidden');
            });
        }
        
        // --- 新增：練習模式相關函式 ---

        /**
         * 打開練習設定 Modal
         */
        function openQuizModal() {
            quizSetupError.classList.add('hidden'); // 隱藏錯誤訊息
            overlay.classList.remove('hidden'); // 顯示遮罩
            quizModal.classList.remove('hidden');
            // 觸發 CSS 動畫
            setTimeout(() => {
                quizModalBackdrop.classList.add('opacity-100');
                quizModalContent.classList.add('scale-100', 'opacity-100');
            }, 10); // 短暫延遲以觸發 transition
        }

        /**
         * 關閉練習設定 Modal
         */
        function closeQuizModal() {
            quizModalBackdrop.classList.remove('opacity-100');
            quizModalContent.classList.remove('scale-100', 'opacity-100');
            // 動畫結束後隱藏
            setTimeout(() => {
                quizModal.classList.add('hidden');
                // 只有在側邊欄也關閉時才隱藏遮罩
                if (!sidebar.classList.contains('open')) {
                    overlay.classList.add('hidden');
                }
            }, 300);
        }

        /**
         * 動態填入「選擇天數」的 Checkbox
         */
        function populateDaySelectionModal() {
            daySelectionGrid.innerHTML = '';
            const days = Object.keys(vocabData);
            days.forEach(day => {
                const label = document.createElement('label');
                label.className = 'flex items-center p-2 rounded-md hover:bg-gray-100 cursor-pointer';
                label.innerHTML = `
                    <input type="checkbox" name="quiz-day" value="${day}" class="form-checkbox text-blue-600 rounded">
                    <span class="ml-2 text-sm text-gray-700">${day}</span>
                `;
                daySelectionGrid.appendChild(label);
            });
        }
        
        /**
         * 全選 / 全不選 天數
         */
        function toggleAllDays() {
            const checkboxes = daySelectionGrid.querySelectorAll('input[name="quiz-day"]');
            // 檢查是否所有都已被選中
            const allChecked = Array.from(checkboxes).every(cb => cb.checked);
            // 如果都選了，就全不選；否則全選
            checkboxes.forEach(cb => {
                cb.checked = !allChecked;
            });
        }
        
        /**
         * 開始測驗 (核心功能)
         */
        function startQuiz() {
            // 1. 收集設定
            const selectedDays = Array.from(daySelectionGrid.querySelectorAll('input[name="quiz-day"]:checked'))
                                    .map(cb => cb.value);
            // 修改：從單選改成讀取所有勾選的複選框
            const selectedQuizTypes = Array.from(document.querySelectorAll('input[name="quiz-type"]:checked'))
                                    .map(cb => cb.value);
            
            // 2. 驗證 (天數)
            if (selectedDays.length === 0) {
                quizSetupError.textContent = '請至少選擇一個天數';
                quizSetupError.classList.remove('hidden');
                setTimeout(() => quizSetupError.classList.add('hidden'), 2000);
                return;
            }

            // 新增：驗證 (練習模式)
            if (selectedQuizTypes.length === 0) {
                quizSetupError.textContent = '請至少選擇一種練習模式'; // 顯示新的錯誤訊息
                quizSetupError.classList.remove('hidden');
                setTimeout(() => {
                    quizSetupError.classList.add('hidden');
                    quizSetupError.textContent = '請至少選擇一個天數'; // 恢復預設錯誤訊息
                }, 2000);
                return;
            }
            
            // 3. 收集單字
            let words = [];
            selectedDays.forEach(day => {
                words.push(...vocabData[day]);
            });
            
            // 4. 確保單字數足夠 (至少 4 題才能玩)
            if (words.length < 4) {
                quizSetupError.textContent = '單字太少 (至少需 4 個)';
                quizSetupError.classList.remove('hidden');
                setTimeout(() => {
                    quizSetupError.textContent = '請至少選擇一個天數';
                    quizSetupError.classList.add('hidden');
                }, 2000);
                return;
            }
            
            // 5. 初始化狀態
            quizState = {
                words: shuffleArray(words),
                quizType: selectedQuizTypes, // 修改：儲存一個包含所有模式的陣列
                currentIndex: 0,
                streak: 0,
                correctAnswers: 0,
                totalQuestions: words.length
            };
            
            // 6. 關閉 Modal 並切換介面
            closeQuizModal();
            mainTitle.textContent = "練習模式";
            mainContentArea.innerHTML = ''; // 清空內容
            mainFooter.classList.add('hidden'); // 隱藏底部
            
            // 7. 顯示第一題
            displayNextQuestion();
        }

        /**
         * 顯示下一題測驗
         */
        function displayNextQuestion() {
            // 檢查是否結束
            if (quizState.currentIndex >= quizState.totalQuestions) {
                showQuizResults();
                return;
            }

            const currentWord = quizState.words[quizState.currentIndex];
            
            // 產生 3 個錯誤選項 (decoys)
            let decoys = [];
            const allWordsPool = Object.values(vocabData).flat();
            while (decoys.length < 3) {
                const randomWord = allWordsPool[Math.floor(Math.random() * allWordsPool.length)];
                // 確保 decoy 不是答案，且不重複
                if (randomWord.word !== currentWord.word && !decoys.some(d => d.word === randomWord.word)) {
                    decoys.push(randomWord);
                }
            }
            
            const options = shuffleArray([currentWord, ...decoys]);
            
            // --- 修改：隨機選擇練習模式 ---
            // 決定問題和答案
            let questionText, answerTexts, subText;
            
            // 1. 從使用者勾選的模式陣列中，隨機選一種
            const randomQuizType = quizState.quizType[Math.floor(Math.random() * quizState.quizType.length)];

            // 2. 根據隨機選中的模式來產生題目
            if (randomQuizType === 'en-to-zh') {
                questionText = currentWord.word;
                answerTexts = options.map(opt => opt.definition);
                subText = '請選擇正確的中文';
            } else { // 'zh-to-en'
                questionText = currentWord.definition;
                answerTexts = options.map(opt => opt.word);
                subText = '請選擇正確的英文';
            }
            
            // 產生 HTML
            const quizHTML = `
                <div id="quiz-container" class="max-w-2xl mx-auto p-4">
                    <!-- 狀態列 -->
                    <div class="flex justify-between items-center mb-6">
                        <span class="text-sm font-medium text-gray-600">
                            進度: ${quizState.currentIndex + 1} / ${quizState.totalQuestions}
                        </span>
                        <span class="text-lg font-bold text-yellow-500">
                            🔥 連對: ${quizState.streak}
                        </span>
                        <button id="exit-quiz-btn" class="text-sm text-gray-500 hover:text-red-600 hover:underline">
                            退出練習
                        </button>
                    </div>
                    
                    <!-- 題目 -->
                    <div class="bg-white p-8 rounded-lg shadow-md text-center">
                        <h2 class="text-3xl font-bold text-gray-800">${questionText}</h2>
                        <!-- 修改：顯示動態的提示文字 -->
                        <span class="text-sm text-gray-400">${subText}</span>
                    </div>
                    
                    <!-- 選項 -->
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-8">
                        ${options.map((opt, index) => `
                            <button 
                                class="quiz-option-btn w-full p-4 bg-white border-2 border-gray-200 rounded-lg shadow-sm text-gray-700 font-medium text-center"
                                data-correct="${opt.word === currentWord.word}"
                            >
                                ${answerTexts[index]}
                            </button>
                        `).join('')}
                    </div>
                </div>
            `;
            
            mainContentArea.innerHTML = quizHTML;
            
            // 綁定事件
            document.getElementById('exit-quiz-btn').addEventListener('click', () => exitQuizMode(true));
            document.querySelectorAll('.quiz-option-btn').forEach(btn => {
                btn.addEventListener('click', handleQuizAnswer);
            });
        }
        
        /**
         * 處理測驗答案
         */
        function handleQuizAnswer(e) {
            const clickedButton = e.target;
            const isCorrect = clickedButton.dataset.correct === 'true';
            
            // 停止所有按鈕的點擊
            document.querySelectorAll('.quiz-option-btn').forEach(btn => {
                btn.disabled = true;
            });

            if (isCorrect) {
                clickedButton.classList.add('correct');
                quizState.streak++;
                quizState.correctAnswers++;
                
                // 檢查是否觸發特效
                if (quizState.streak > 0 && quizState.streak % 5 === 0) {
                    showStreakEffect(quizState.streak);
                }
            } else {
                clickedButton.classList.add('incorrect');
                quizState.streak = 0;
                // 標示出正確答案
                document.querySelector('.quiz-option-btn[data-correct="true"]').classList.add('correct');
            }
            
            quizState.currentIndex++;
            
            // 延遲 1.5 秒後到下一題
            setTimeout(() => {
                displayNextQuestion();
            }, 1500);
        }

        /**
         * 顯示連勝特效
         */
        function showStreakEffect(streakCount) {
            streakEffectEl.textContent = `✨ ${streakCount} 連對!`;
            streakEffectEl.classList.remove('hidden', 'animate');
            
            // 強制瀏覽器重繪
            void streakEffectEl.offsetWidth; 
            
            streakEffectEl.classList.add('animate');
            
            // 動畫結束後隱藏
            setTimeout(() => {
                streakEffectEl.classList.add('hidden');
                streakEffectEl.classList.remove('animate');
            }, 1000); // 配合 CSS 動畫時間
        }
        
        /**
         * 顯示測驗結果
         */
        function showQuizResults() {
            const score = (quizState.correctAnswers / quizState.totalQuestions * 100).toFixed(0);
            const resultHTML = `
                <div class="max-w-2xl mx-auto p-4 text-center">
                    <h2 class="text-3xl font-bold text-gray-800 mb-4">測驗完成！</h2>
                    <div class="bg-white p-8 rounded-lg shadow-md">
                        <p class="text-lg text-gray-600">你的成績：</p>
                        <h3 class="text-6xl font-bold text-blue-600 my-4">${score} <span class="text-2xl">%</span></h3>
                        <p class="text-gray-700">
                            答對 ${quizState.correctAnswers} 題，共 ${quizState.totalQuestions} 題
                        </p>
                    </div>
                    <button id="exit-quiz-btn" class="mt-8 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700">
                        返回瀏覽模式
                    </button>
                </div>
            `;
            mainContentArea.innerHTML = resultHTML;
            document.getElementById('exit-quiz-btn').addEventListener('click', () => exitQuizMode(true));
        }

        /**
         * 退出練習模式
         */
        function exitQuizMode(render = true) {
            // 移除練習介面 (如果存在)
            document.getElementById('quiz-container')?.remove();
            
            // 恢復單字卡網格和底部
            mainContentArea.innerHTML = ''; // 清空
            mainContentArea.appendChild(vocabGrid); // 把儲存的 grid 元素加回去
            mainFooter.classList.remove('hidden');
            
            // 重設標題
            mainTitle.textContent = "高中英文單字練習";
            
            // 只有在需要時才重新渲染 (例如點擊 "退出練習")
            if (render) {
                renderVocabGrid(currentDay);
            }
        }

        // --- 初始載入 ---
        document.addEventListener('DOMContentLoaded', () => {
             renderSidebar();
             setupSidebarToggle();
             populateDaySelectionModal(); // 新增：填入 Modal

            // (瀏覽) 搜尋欄事件
            const searchBar = document.getElementById('search-bar');
            searchBar.addEventListener('input', () => {
                const searchTerm = searchBar.value.trim();
                if (searchTerm) {
                    renderGlobalSearchResults(searchTerm);
                } else {
                    renderVocabGrid(currentDay); // 搜尋為空時，回到目前天數
                }
            });

            // (瀏覽) 載入預設的第一天
            renderVocabGrid(currentDay);
            
            // --- 新增：練習模式事件綁定 ---
            startQuizModalBtn.addEventListener('click', openQuizModal);
            closeQuizModalBtn.addEventListener('click', closeQuizModal);
            quizModalBackdrop.addEventListener('click', closeQuizModal);
            toggleAllDaysBtn.addEventListener('click', toggleAllDays);
            startQuizBtn.addEventListener('click', startQuiz);
            
        });
    </script>
</body>
</html>
